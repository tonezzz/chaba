services:
  wg-dns:
    image: coredns/coredns:1.11.1
    container_name: idc1-wg-dns
    restart: unless-stopped
    network_mode: "host"
    command: ["-conf", "/Corefile"]
    volumes:
      - ./config/coredns/Corefile:/Corefile:ro
      - ./config/coredns/zones:/etc/coredns/zones:ro

  wgdashboard:
    image: ghcr.io/wgdashboard/wgdashboard:latest
    container_name: idc1-wgdashboard
    restart: unless-stopped
    environment:
      tz: ${tz:-Asia/Bangkok}
      wgd_port: ${wgd_port:-10086}
      username: ${WG_USER:-}
      password: ${WG_PASSWORD:-}
      enable_totp: ${enable_totp:-true}
      wg_autostart: ${wg_autostart:-}
    ports:
      - "${WGD_BIND_IP:-10.8.0.1}:${wgd_port:-10086}:${wgd_port:-10086}"
    volumes:
      - /etc/wireguard:/etc/wireguard
      - wgdashboard_data:/data
    cap_add:
      - NET_ADMIN

volumes:
  wgdashboard_data:
