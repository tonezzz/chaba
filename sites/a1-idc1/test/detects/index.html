<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title id="pageTitle">Surf Vision Lab</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%2300c2b0'/%3E%3Cstop offset='100%25' stop-color='%233144ff'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='64' height='64' rx='12' fill='url(%23g)'/%3E%3Ctext x='50%25' y='58%25' text-anchor='middle' font-size='34' font-family='Space Grotesk,Segoe UI,system-ui,sans-serif' fill='white'%3EAI%3C/text%3E%3C/svg%3E"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/test/detects/style.css" />
  </head>
  <body>
    <main class="shell">
      <header class="hero">
        <div>
          <p class="eyebrow" id="heroEyebrow">Surf Thailand â€¢ A1 Vision Utilities</p>
          <h1 id="heroTitle">Photo understanding sandbox</h1>
          <p class="lede" id="heroLede">
            Drop in a still photo, choose one of the vision prompts, and weâ€™ll send it through our Glama vision endpoint
            to describe the scene and pinpoint notable objects.
          </p>
        </div>
        <div class="hero-meta">
          <div class="lang-switch">
            <label for="languageSelect">
              <span id="langLabel">Language</span>
              <select id="languageSelect" aria-label="Interface language">
                <option value="th">à¹„à¸—à¸¢ (TH) â€” à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™</option>
                <option value="en">English (EN) â€” Default</option>
                <option value="de">Deutsch (DE) â€” German</option>
                <option value="no">Norsk (NO) â€” Norwegian</option>
                <option value="sv">Svenska (SV) â€” Swedish</option>
                <option value="es">EspaÃ±ol (ES) â€” Spanish</option>
                <option value="ja">æ—¥æœ¬èªž (JA) â€” Japanese</option>
                <option value="zh">ä¸­æ–‡ (ZH) â€” Chinese</option>
                <option value="ko">í•œêµ­ì–´ (KO) â€” Korean</option>
              </select>
            </label>
          </div>
          <div class="meta-chip">
            <label class="meta-select">
              <span id="modelTagLabel">LLM</span>
              <select id="modelQuickSelect" aria-label="Vision model quick select">
                <option value="" disabled selected>Loadingâ€¦</option>
              </select>
            </label>
          </div>
          <div class="meta-chip">
            <span id="latencyLabel">Latency</span>
            <strong id="latencyTag">â€”</strong>
          </div>
        </div>
      </header>

      <section class="panel">
        <form id="detectForm" class="detect-form">
          <div class="grid">
            <div class="card">
              <div class="card-head">
                <h2 id="uploadHeading">1. Upload photo</h2>
                <p id="uploadBody">Single still image, max 10â€¯MB. Works great with portrait or landscape shots.</p>
              </div>
              <div class="dropzone" data-dropzone>
                <input
                  type="file"
                  id="photoInput"
                  accept="image/*,.heic,.heif,.avif,.webp,.jpeg,.jpg,.png"
                  hidden
                />
                <input
                  type="file"
                  id="cameraInput"
                  accept="image/*,.heic,.heif,.avif,.webp,.jpeg,.jpg,.png"
                  capture="environment"
                  hidden
                />
                <div class="dropzone-inner">
                  <p class="drop-title" id="dropTitle">Drag & drop photo</p>
                  <p class="drop-sub">
                    <span id="dropAlt">or</span>
                    <button type="button" id="browseBtn">browse files</button>
                    <button type="button" id="cameraBtn" class="ghost-btn">take a photo</button>
                  </p>
                  <p id="fileHint" class="file-hint">No file selected yet.</p>
                </div>
              </div>
              <div id="previewWrap" class="preview hidden">
                <img id="previewImage" alt="Selected preview" />
              </div>
            </div>

            <div class="card">
              <div class="card-head">
                <h2 id="promptHeading">2. Pick a vision brief</h2>
                <p id="promptBody">Tap a chip to autofill the prompt, or fine-tune in the text box.</p>
              </div>
              <label class="model-field">
                <span id="modelLabel">Vision model</span>
                <select id="modelSelect" aria-label="Vision model">
                  <option value="" disabled selected>Loading modelsâ€¦</option>
                </select>
              </label>
              <div class="prompt-chips" id="promptChips">
                <!-- populated by script -->
              </div>
              <label class="prompt-field">
                <span id="promptLabel">Custom instructions</span>
                <textarea
                  id="promptInput"
                  rows="6"
                  placeholder="Explain what you want the model to focus onâ€¦"
                ></textarea>
              </label>
            </div>
          </div>

          <div class="cta-row">
            <div class="status" id="statusBanner">Waiting for your photoâ€¦</div>
            <button type="submit" id="analyzeBtn">Run describe + detect</button>
          </div>
        </form>
      </section>

      <section class="panel chat-panel">
        <div class="card chat-card">
          <div class="card-head">
            <h2 id="chatHeading">Ask about this analysis</h2>
            <p class="muted" id="chatSubheading">Once a photo is analyzed, ask follow-up questions here.</p>
          </div>
          <div id="chatLog" class="chat-log" aria-live="polite"></div>
          <div id="chatPresets" class="chat-presets" aria-label="Sample follow-up questions"></div>
          <form id="chatForm" class="chat-input-row">
            <div class="chat-input-group">
              <input
                type="text"
                id="chatInput"
                placeholder="Type a question in your languageâ€¦"
                autocomplete="off"
              />
              <button type="button" id="chatMicBtn" class="chat-mic-btn" aria-label="Dictate message">
                <span class="icon">ðŸŽ™</span>
              </button>
            </div>
            <button type="submit" id="chatSendBtn">Ask</button>
          </form>
        </div>
      </section>

      <section class="panel output-panel">
        <div class="card">
          <div class="card-head">
            <h2 id="summaryHeading">Vision summary</h2>
            <p id="descriptionOutput" class="lede muted">No analysis yet.</p>
          </div>
        </div>
        <div class="card">
          <div class="card-head">
            <h2 id="objectsHeading">Detected objects</h2>
            <p class="muted" id="objectsSubheading">Top items, sorted by model confidence.</p>
          </div>
          <div id="objectsGrid" class="objects-grid"></div>
        </div>
        <div class="card">
          <div class="card-head">
            <h2 id="rawHeading">Raw payload</h2>
            <p class="muted" id="rawSubheading">Direct JSON from the Glama response.</p>
          </div>
          <pre id="rawOutput" class="raw-output">// Awaiting responseâ€¦</pre>
        </div>
      </section>
    </main>

    <script type="module" src="/test/detects/app.js"></script>
  </body>
</html>
